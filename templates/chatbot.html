<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chatbot - Ananta AI</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans flex items-center justify-center h-screen">
  <div class="w-full max-w-md bg-white rounded-lg shadow-lg flex flex-col h-[80vh]">
    <!-- Chat Messages -->
    <div id="chatbox" class="flex-1 p-4 overflow-y-auto space-y-3"></div>

    <!-- Input Area -->
    <form id="chat-form" class="p-4 border-t flex gap-2">
      <input id="user-input" 
             type="text" 
             placeholder="Type your message..." 
             class="flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring focus:ring-primary">
      <button class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90">Send</button>
    </form>
  </div>

  <script>
    const form = document.getElementById("chat-form");
    const input = document.getElementById("user-input");
    const chatbox = document.getElementById("chatbox");

    function addMessage(text, sender) {
      const div = document.createElement("div");
      div.className = sender === "user" 
        ? "text-right"
        : "text-left";
      div.innerHTML = `<span class="inline-block px-3 py-2 rounded-lg ${sender === "user" ? "bg-blue-500 text-white" : "bg-gray-200"}">${text}</span>`;
      chatbox.appendChild(div);
      chatbox.scrollTop = chatbox.scrollHeight;
    }

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      const message = input.value.trim();
      if (!message) return;

      addMessage(message, "user");
      input.value = "";

      // Send message to backend
      const res = await fetch("/get_response", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message })
      });
      const data = await res.json();
      addMessage(data.reply, "bot");
    });
  </script>
</body>
</html>
